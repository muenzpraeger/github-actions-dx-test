"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/*
 * Copyright (c) 2018, salesforce.com, inc.
 * All rights reserved.
 * SPDX-License-Identifier: MIT
 * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/MIT
 */
const language_1 = require("../../shared/language");
/**
 * EXPERIMENTAL: This function allows for the registration of "services" in
 * LWC by exposing hooks into the component life-cycle. This API is subject
 * to change or being removed.
 */
function decorate(Ctor, decorators) {
    // intentionally comparing decorators with null and undefined
    if (!language_1.isFunction(Ctor) || decorators == null) {
        throw new TypeError();
    }
    const props = language_1.getOwnPropertyNames(decorators);
    // intentionally allowing decoration of classes only for now
    const target = Ctor.prototype;
    for (let i = 0, len = props.length; i < len; i += 1) {
        const propName = props[i];
        const decorator = decorators[propName];
        if (!language_1.isFunction(decorator)) {
            throw new TypeError();
        }
        const originalDescriptor = language_1.getOwnPropertyDescriptor(target, propName);
        const descriptor = decorator(Ctor, propName, originalDescriptor);
        if (!language_1.isUndefined(descriptor)) {
            language_1.defineProperty(target, propName, descriptor);
        }
    }
    return Ctor; // chaining
}
exports.default = decorate;
//# sourceMappingURL=decorate.js.map