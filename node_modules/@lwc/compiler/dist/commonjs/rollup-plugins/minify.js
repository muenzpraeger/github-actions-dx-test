"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/*
 * Copyright (c) 2018, salesforce.com, inc.
 * All rights reserved.
 * SPDX-License-Identifier: MIT
 * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/MIT
 */
const terser_1 = require("terser");
/**
 * Rollup plugin applying minification to the generated bundle.
 */
function default_1({ sourcemap }) {
    return {
        name: 'lwc-minify',
        renderChunk(src) {
            const { code, map, error } = terser_1.minify(src, {
                sourceMap: sourcemap,
            });
            if (error) {
                throw error;
            }
            if (map) {
                return {
                    code: code,
                    map: map,
                };
            }
            else {
                return code;
            }
        },
    };
}
exports.default = default_1;
//# sourceMappingURL=minify.js.map